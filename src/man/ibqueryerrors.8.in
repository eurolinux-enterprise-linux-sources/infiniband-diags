.TH IBQUERYERRORS 8 "Dec 31, 2009" "OpenIB" "OpenIB Diagnostics"

.SH NAME
ibqueryerrors \- query and report non-zero IB port counters

.SH SYNOPSIS
.B ibqueryerrors [options]

.SH DESCRIPTION
.PP
The default behavior is to report the port error counters which exceed a
threshold for each port in the fabric.  The default threshold is zero (0).
Error fields can also be suppressed entirely.

In addition to reporting errors on every port.  ibqueryerrors can report the
port transmit and receive data as well as report full link information to the
remote port if available.

.SH OPTIONS

.PP
.TP
\fB\-s <err1,err2,...>\fR
Suppress the errors listed in the comma separated list provided.
.TP
\fB\-c\fR
Suppress some of the common "side effect" counters.  These counters usually do
not indicate an error condition and can be usually be safely ignored.
.TP
\fB\-G <port_guid>\fR \fB\-S <port_guid>\fR \fB\-\-port\-guid\fR
Report results for the port specified.  For switches results are printed for
all ports not just switch port 0.
.TP
\-S same as "-G". (provided only for backward compatibility)
.TP
\fB\-D <direct_route>\fR
Report results for the port specified.  For switches results are printed for
all ports not just switch port 0.
.TP
\fB\-r\fR
Report the port information.  This includes LID, port, external port (if
applicable), link speed setting, remote GUID, remote port, remote external port
(if applicable), and remote node description information.
.TP
\fB\-\-data\fR
Include the optional transmit and receive data counters.
.TP
\fB\-\-threshold-file\fR
Specify an alternate threshold file.  The default is @IBDIAG_CONFIG_PATH@/error_thresholds
.TP
\fB\-\-switch\fR  print data for switches only
.TP
\fB\-\-ca\fR  print data for CA's only
.TP
\fB\-\-router\fR  print data for routers only
.TP
\fB\-\-clear\-errors\fR \fB\-k\fR Clear error counters after read.
\-k and \-K can be used together to clear both errors and counters.
.TP
\fB\-\-clear\-counts\fR \fB\-K\fR Clear data counters after read.
\fBCAUTION\fR clearing data counters will occur regardless of if they are
printed or not.  This is because data counters are only \fBprinted\fR on ports
which have errors.  This means if a port has 0 errors and the \-K option is
specified the data counters will be cleared without any printed output.
.TP
\fB\-\-details\fR include receive error and transmit discard details
.TP
\fB\-\-load\-cache\fR <filename>
Load and use the cached ibnetdiscover data stored in the specified
filename.  May be useful for outputting and learning about other
fabrics or a previous state of a fabric.  Cannot be used if user
specifies a direct route path.  See
.B ibnetdiscover
for information on caching ibnetdiscover output.
.TP
\fB\-R\fR  (This option is obsolete and does nothing)

.SH COMMON OPTIONS
.PP
\-d      raise the IB debugging level.
	May be used several times (-ddd or -d -d -d).
.PP
\-e      show send and receive errors (timeouts and others)
.PP
\-h      show the usage message
.PP
\-v      increase the application verbosity level.
	May be used several times (-vv or -v -v -v)
.PP
\-V      show the version info.

# Other common flags:
.PP
\-C <ca_name>    use the specified ca_name.
.PP
\-P <ca_port>    use the specified ca_port.
.PP
\-t <timeout_ms> override the default timeout for the solicited mads.

.SH EXIT STATUS

If a failure to scan the fabric occurs return -1.  If the scan succeeds without
errors beyond thresholds return 0.  If errors are found on ports beyond
thresholds return 1.

.SH FILES

@IBDIAG_CONFIG_PATH@/error_thresholds

Define threshold values for errors.  File format is simple "name=val".
Comments begin with '#'

Example:

	# Define thresholds for error counters
.br
	SymbolErrorCounter=10
.br
	LinkErrorRecoveryCounter=10
.br
	VL15Dropped=100


.SH AUTHOR
.TP
Ira Weiny
.RI < weiny2@llnl.gov >
